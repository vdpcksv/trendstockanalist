# AlphaFinder: 고도화 및 확장 기능 명세서 (Roadmap)

이 문서는 현재 구축된 주식 분석 플랫폼의 기능을 확장하고, 사용자 체류 시간 증대 및 데이터 분석의 정밀도를 높이기 위한 **미래 기능 구현 계획(Backlog)**입니다.

---

## 🚀 Phase 1: AI & 머신러닝 예측 강화 (The Brain)
> 단순한 보조지표 계산을 넘어, 미래 주가를 통계적/인공지능 기법으로 예측하여 사용자에게 '확률'을 제공합니다.

### 1-1. 시계열 주가 예측 (Prophet / LSTM)
- **개요**: Facebook Prophet 또는 LSTM(딥러닝) 모델을 활용해 특정 종목의 향후 30일 예상 가격 범위(밴드)를 시각화.
- **구현 방안**:
  - `fbprophet` 또는 `scikit-learn` 라이브러리 추가.
  - 매일 밤 스케줄러(`APScheduler`)가 주요 종목의 종가를 학습하여 모델 파일(.pkl) 업데이트.
  - 차트 우측에 'AI 예상 경로(회색 음영)' 표시.

### 1-2. LLM 기반 뉴스 감성 정밀 분석
- **개요**: 현재의 단순 키워드 매칭(상승/하락 단어 개수) 방식을 넘어, LLM(Gemini/GPT) API를 연동해 뉴스의 맥락을 파악.
- **구현 방안**:
  - 네이버 뉴스 헤드라인 + 본문 요약을 LLM에 전송.
  - "이 뉴스가 주가에 호재인지 악재인지 0~100점 사이로 평가해줘" 프롬프트 적용.
  - 종목별 '감성 기상도(맑음/흐림/비)' 아이콘 표출.

### 1-3. 유사 패턴 찾기 (Pattern Matching)
- **개요**: 현재 차트 모양(패턴)과 가장 유사했던 과거(10년 치) 차트를 찾아, 그 후 주가가 어떻게 움직였는지 통계 제시.
- **구현 방안**:
  - 주가 데이터를 정규화(Normalization)하여 코사인 유사도(Cosine Similarity) 계산.
  - "현재 차트는 2018년 삼성전자의 흐름과 89% 유사합니다. 당시 1개월 후 +15% 상승했습니다." 문구 출력.

---

## 👥 Phase 2: 커뮤니티 및 소셜 기능 (The Heart)
> 사용자가 수동적으로 정보를 소비하는 것을 넘어, 참여하고 경쟁하며 앱에 머무르는 시간을 늘립니다.

### 2-1. 종목별 토론방 (댓글 시스템)
- **개요**: 각 종목 분석 페이지(`review.html`) 하단에 로그인한 유저끼리 의견을 남기는 댓글창 생성.
- **구현 방안**:
  - DB에 `Comments` 테이블 추가 (`user_id`, `ticker`, `content`, `created_at`).
  - AJAX 비동기 통신으로 새로고침 없이 댓글 등록/삭제 구현.

### 2-2. 인간 vs AI 승부 (Bull & Bear 투표)
- **개요**: 네이버 종토방처럼 사용자가 해당 종목의 내일 상승/하락을 투표하는 기능.
- **구현 방안**:
  - "내일 오른다(Bull) 🐂" vs "내린다(Bear) 🐻" 버튼 생성.
  - AI 퀀트 점수와 유저 투표 비율을 비교하여 보여줌 (예: AI는 매수인데, 대중은 매도 우세).

### 2-3. 모의투자 랭킹 (Leaderboard)
- **개요**: `portfolio`에 등록한 종목의 가상 수익률을 집계하여, 주간/월간 수익률 랭킹 공개.
- **구현 방안**:
  - `Users` 테이블에 `total_return` 컬럼 추가.
  - 매일 장 마감 후 스케줄러가 전 유저의 포트폴리오 수익률 갱신 및 순위 산정.
  - 상위 랭커의 포트폴리오를 (익명으로) 엿볼 수 있는 기능 제공.

---

## 🛡️ Phase 3: 데이터 신뢰성 및 인프라 (The Backbone)
> 크롤링 의존도를 낮추고 안정적인 공식 데이터를 확보하며, 보안을 강화합니다.

### 3-1. 한국투자증권(KIS) 또는 Open DART API 연동
- **개요**: 네이버 크롤링은 HTML 구조 변경 시 에러 위험이 큼. 증권사 공식 API로 실시간 호가 및 정확한 재무제표 확보.
- **구현 방안**:
  - KIS Developers API 키 발급 및 `kis_api.py` 모듈 개발.
  - 실시간 체결가 및 10단계 호가창 데이터 시각화.

### 3-2. 서버 사이드 알림 시스템 (Telegram/Email)
- **개요**: 현재 브라우저 로컬 저장소 방식의 알림을 서버 DB 기반으로 변경하여, 앱을 꺼놔도 알림 발송.
- **구현 방안**:
  - `Alerts` 테이블 생성 (`user_id`, `ticker`, `target_price`, `condition`).
  - `APScheduler`가 1분마다 현재가를 체크하여 조건 도달 시 텔레그램 API로 메시지 전송 (`python-telegram-bot`).

### 3-3. HTTPS 및 보안 헤더 강화
- **개요**: 상업적 서비스를 위한 보안 표준 준수.
- **구현 방안**:
  - JWT 토큰 만료 시간 및 Refresh Token 로직 고도화.
  - CORS 설정 정밀화 및 SQL Injection 방어 코드 감사.

---

## 💰 Phase 4: 수익화 및 마케팅 (The Wallet)
> 트래픽을 수익으로 전환하는 구체적인 장치들.

### 4-1. Freemium 모델 도입 (멤버십)
- **개요**: 일반 회원은 일 5회 분석 제한, 프리미엄 회원(월 구독)은 무제한 + AI 고급 리포트 열람.
- **구현 방안**:
  - `Users` 테이블 `membership` 컬럼 활용.
  - 결제 모듈(Toss Payments 연동) 붙이기.

### 4-2. SEO (검색 엔진 최적화)
- **개요**: 구글 검색 시 '삼성전자 주가 전망', '반도체 계절성' 등으로 유입되도록 최적화.
- **구현 방안**:
  - `sitemap.xml` 및 `robots.txt` 생성 및 라우팅.
  - 각 페이지별 동적 `meta description` 태그 생성 (Jinja2 템플릿 활용).

## 📣 Phase 5: AlphaFinder 홍보 및 그로스 전략 (Community-First)
> "광고"가 아니라 "유용한 도구(Utility)"로 인식되게 만듭니다. 억지스러운 추천 대신 데이터를 담백하게 보여줍니다.

### 5-1. '데이터 팩트' 공유 카드 (Dynamic OG Image)
- **개요**: "대박 추천주" 같은 멘트는 금지. 오직 차트와 데이터 수치만 보여주는 이미지를 생성합니다.
- **톤앤매너(Tone)**: 건조하고 분석적인 느낌 (드라이함).
- **공유 이미지 예시**:
  - **[X]** "🚨 삼성전자 긴급 매수 신호 포착! 클릭하세요!" (광고 같음)
  - **[O]** "삼성전자: RSI 30 + 기관 수급 3일 연속 유입. (Alpha Score: 82)" (데이터만 전달)
- **구현 방안**:
  - 카카오톡 공유 시 썸네일에 **종목명, 현재가, 그리고 핵심 지표 3개**만 깔끔하게 박아서 보여줌.
  - 사용자가 "이거 데이터 뜬 거 봐라"라고 공유할 수 있게 유도.

### 5-2. '투자 성향 MBTI' (Alpha Type Test)
- **개요**: 주식 투자 스타일을 재미있는 키워드로 정의해주는 미니 테스트. 결과 공유를 유도합니다.
- **결과 키워드 (유머 코드 반영)**:
  - **"인간 지표"**: 내가 사면 떨어지고 팔면 오르는 타입 (ㅠㅠ)
  - **"야수의 심장"**: 하한가 따라잡기만 골라서 하는 타입
  - **"데이터 변태"**: 재무제표 3시간 정독하고 1주 사는 타입
- **구현 방안**:
  - 결과 페이지 하단에 **"내 성향을 보완해 줄 AI 종목 분석 보러 가기"** 버튼을 작게 배치 (강요 X).

### 5-3. 수익/손실 인증 '짤방 메이커' (P&L Card)
- **개요**: 주식 커뮤니티에 글을 올릴 때 쓸 수 있는 '인증샷'을 예쁘게 만들어줍니다.
- **컨셉**:
  - **수익 났을 때**: "AlphaFinder가 멱살 잡고 캐리함 ㅋㅋ" 문구와 로켓 배경.
  - **손실 났을 때**: "AI 말 안 듣고 뇌동매매 하다가 물림..." 문구와 한강(물) 배경.
- **전략**: 사용자가 자신의 상황을 '자조적'이거나 '자랑'하는 용도로 쓰게 하여 자연스럽게 로고 노출.

### 5-4. 커뮤니티용 '오늘의 요약' 복사 버튼
- **개요**: 주식 갤러리 등에 "오늘 장 요약해준다"라고 글 쓸 때, 복사+붙여넣기 딱 좋은 텍스트 포맷 제공.
- **텍스트 포맷 (스팸 느낌 제거)**:
  > (제목) 오늘 장 데이터로만 요약해봄
  >
  > 1.  오늘 주도 테마: 반도체 (외인 수급 쏠림)
  > 2.  특이점: 삼성전자 7만 원 방어함
  > 3.  내일 지켜볼 만한 거: [종목명] (차트 자리가 좀 특이함)
  >
  > (출처 링크는 맨 끝에 한 줄만 작게: 데이터 출처 AlphaFinder)
- **전략**: 운영자가 직접 올리기보다, 유저가 "이 사이트 요약 기능 편하네" 하고 퍼가게 유도.